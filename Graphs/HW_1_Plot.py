import matplotlib.pyplot as plt
import numpy as np
dates = [1971, 1972 , 1974 , 1974 , 1974 , 1974 , 1975 , 1976 , 1976 , 1978 , 1978 , 1979 , 1979 , 1981 , 1982 , 1982 , 1983 , 1984 , 1985 , 1985 , 1985 , 1986 , 1987 , 1987 , 1988 , 1988 , 1989 , 1989 , 1990 , 1991 , 1991 , 1993 , 1994 , 1994 , 1995 , 1995 , 1996 , 1997 , 1997 , 1998 , 1999 , 1999 , 1999 , 1999 , 1999 , 2000 , 2000 , 2001 , 2002 , 2002 , 2003 , 2003 , 2003 , 2004 , 2004 , 2005 , 2005 , 2006 , 2006 , 2006 , 2006 , 2006 , 2007 , 2007 , 2007 , 2007 , 2007 , 2008 , 2008 , 2008 , 2008 , 2008 , 2009 , 2010 , 2010 , 2010 , 2010 , 2010 , 2010 , 2011 , 2011 , 2011 , 2012 , 2012 , 2012 , 2012 , 2012 , 2012 , 2012 , 2012 , 2013 , 2013 , 2013 , 2013 , 2014 , 2014 , 2014 , 2014 , 2014 , 2014 , 2015 , 2015 , 2015 , 2015 , 2015 , 2015 , 2015 , 2016 , 2016 , 2016 , 2016 , 2016 , 2016 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2018 , 2018 , 2018 , 2018 , 2018 , 2018 , 2018]
transistors = [2300, 3500, 8000, 5000, 4500, 4100, 3510, 8500, 6500, 29000, 9000, 68000, 29000, 11500, 134000, 55000, 22000, 190000, 275000, 25000, 16000, 30000, 553000, 273000, 250000, 180000, 1180235, 310000, 1200000, 1350000, 35000, 3100000, 2500000, 578977, 5500000, 2500000, 4300000, 8800000, 7500000, 7500000, 27400000, 22000000, 21300000, 9500000, 111000, 42000000, 21000000, 45000000, 220000000, 55000000, 410000000, 105900000, 54300000, 592000000, 112000000, 228000000, 169000000, 1700000000, 362000000, 291000000, 241000000, 184000000, 789000000, 463000000, 411000000, 169000000, 26000000, 1900000000, 758000000, 731000000, 230000000, 47000000, 904000000, 2300000000, 2000000000, 1400000000, 1200000000, 1170000000, 1000000000, 2600000000, 2270000000, 1160000000, 5000000000, 3100000000, 2750000000, 2100000000, 1400000000, 1303000000, 1200000000, 432000000, 5000000000, 4200000000, 1860000000, 1000000000, 5560000000, 4310000000, 3000000000, 2600000000, 2000000000, 1400000000, 10000000000, 7100000000, 3990000000, 1900000000, 1750000000, 2000000000, 3000000000, 8000000000, 7200000000, 4000000000, 3300000000, 3200000000, 3000000000, 19200000000, 18000000000, 9700000000, 8000000000, 8000000000, 7000000000, 6100000000, 5500000000, 5300000000, 5300000000, 4800000000, 4800000000, 4800000000, 4300000000, 3300000000, 23600000000, 10000000000, 9000000000, 8500000000, 6900000000, 6900000000, 5500000000]
processSize = [10000, 10000, 8000, 5000, 6000, 6000, 8000, 4000, 3000, 3000, 5000, 3500, 3000, 3000, 1500, 3000, 3000, 2000, 1500, 3000, 3000, 2000, 2000, 800, 600, 1500, 1000, 1500, 650, 1000, 800, 800, 600, 700, 500, 350, 500, 350, 350, 250, 180, 250, 250, 250, 350, 180, 180, 130, 180, 130, 130, 130, 130, 130, 90, 90, 90, 90, 65, 65, 90, 65, 65, 65, 45, 65, 45, 45, 45, 45, 45, 45, 45, 45, 65, 45, 45, 32, 40, 32, 32, 32, 22, 32, 32, 32, 22, 32, 32, 32, 28, 22, 22, 28, 22, 22, 20, 22, 20, 22, 20, 22, 22, 14, 14, 14, 16, 14, 14, 16, 16, 14, 10, 14, 10, 14, 14, 14, 16, 14, 10, 10, 10, 14, 14, 14, 10, 10, 16, 7, 12, 7, 7, 7, 12]
dieArea = [12, 14, 11, 27, 20, 16, 21, 18, 20, 33, 21, 44, 33, 6, 49, 60, 9, 85, 104, 50, 30, 102, 61, 173, 87, 152, 213, 294, 218, 68.51, 307, 50, 251, 162, 195, 113, 180, 184, 118, 128, 4.8, 217, 80, 81, 421, 145, 374, 193, 101, 432, 110, 206, 143, 596, 162, 143, 221, 90, 341, 283, 107, 111, 31, 503, 258, 263, 83, 24, 346, 684, 699, 512, 567, 240, 377, 512, 434, 216, 720, 544, 597, 567, 160, 246, 315, 64, 363, 650, 256, 102, 661, 541, 128, 355, 89, 177, 678, 678, 133, 122, 96, 143.9, 683, 456, 110.00, 125, 246, 72.3, 768, 398, 696, 695, 360, 696, 96.72, 94, 94, 192, 213, 213, 89.23, 96.40, 825, 122, 350, 112, 83.27, 74.13]

dieDates = [1971, 1972 , 1974 , 1974 , 1974 , 1974 , 1975 , 1976 , 1976 , 1978 , 1978 , 1979 , 1979 , 1981 , 1982 , 1982 , 1983 , 1984 , 1985 , 1985 , 1986 , 1987 , 1988 , 1989 , 1989 , 1990 , 1991 , 1993 , 1994 , 1994 , 1995 , 1995 , 1996 , 1997 , 1997 , 1998 , 1999 , 1999 , 1999 , 1999 , 1999 , 2000 , 2000 , 2001 , 2002 , 2002 , 2003 , 2003 , 2003 , 2004 , 2004 , 2005 , 2005 , 2006 , 2006 , 2006 , 2006 , 2006 , 2007 , 2007 , 2007 , 2007 , 2007 , 2008 , 2008 , 2008 , 2008 , 2008 , 2009 , 2010 , 2010 , 2010 , 2010 , 2010 , 2010 , 2011 , 2011 , 2011 , 2012 , 2012 , 2012 , 2012 , 2012 , 2012 , 2012 , 2012 , 2013 , 2013 , 2013 , 2013 , 2014 , 2014 , 2014 , 2014 , 2014 , 2014 , 2015 , 2015 , 2015 , 2015 , 2015 , 2015 , 2016 , 2016 , 2016 , 2016 , 2016 , 2016 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2017 , 2018 , 2018 , 2018 , 2018 , 2018 , 2018]



def make_patch_spines_invisible(ax):
    ax.set_frame_on(True)
    ax.patch.set_visible(False)
    for sp in ax.spines.values():
        sp.set_visible(False)


fig, host = plt.subplots()
fig.subplots_adjust(right=0.75)

par1 = host.twinx()
par2 = host.twinx()


par2.spines["right"].set_position(("axes", 1.2))

make_patch_spines_invisible(par2)

par2.spines["right"].set_visible(True)

#scatters
p1, = host.plot(dates, transistors, "b+", linestyle = '', label="Tranistor Count")
p2, = par1.plot(dates, processSize, "ro", linestyle = '',label="Process size in nm")
p3, = par2.plot(dieDates, dieArea, "g.", linestyle = '',label="Die area in MM^2")

#best fint lines
host.plot(np.unique(dates), np.poly1d(np.polyfit(dates, transistors, 1))(np.unique(dates)))
par1.plot(np.unique(dates), np.poly1d(np.polyfit(dates, processSize, 1))(np.unique(dates)))
par2.plot(np.unique(dieDates), np.poly1d(np.polyfit(dieDates, dieArea, 1))(np.unique(dieDates)))

host.set_xlabel("Year")
host.set_ylabel("Tranistor Count")
par1.set_ylabel("Process size in nm")
par2.set_ylabel("Die area in MM^2")

host.yaxis.label.set_color(p1.get_color())
par1.yaxis.label.set_color(p2.get_color())
par2.yaxis.label.set_color(p3.get_color())

tkw = dict(size=4, width=1.5)
host.tick_params(axis='y', colors=p1.get_color(), **tkw)
par1.tick_params(axis='y', colors=p2.get_color(), **tkw)
par2.tick_params(axis='y', colors=p3.get_color(), **tkw)
host.tick_params(axis='x', **tkw)

lines = [p1, p2, p3]

host.legend(lines, [l.get_label() for l in lines], loc = 1)

plt.show();
